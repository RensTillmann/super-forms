!function(e){"object"==typeof exports&&exports&&"object"==typeof module&&module&&module.exports===exports?e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(_){var l=new Date(1970,1,1,0,0,0),b=86400,m={am:"am",pm:"pm",AM:"AM",PM:"PM",decimal:".",mins:"mins",hr:"hr",hrs:"hrs"},y={init:function(a){return this.each(function(){var e=_(this),i=[];for(var t in _.fn.timepicker.defaults)e.data(t)&&(i[t]=e.data(t));var r=_.extend({},_.fn.timepicker.defaults,i,a);r.lang&&(m=_.extend(m,r.lang)),r=_parseSettings(r),e.data("timepicker-settings",r),e.addClass("ui-timepicker-input"),r.useSelect?_render(e):(e.prop("autocomplete","off"),e.on("click.timepicker focus.timepicker",y.show),e.on("change.timepicker",_formatValue),e.on("keydown.timepicker",_keydownhandler),e.on("keyup.timepicker",_keyuphandler),_formatValue.call(e.get(0)))})},show:function(e){var i=_(this),t=i.data("timepicker-settings");if(e){if(!t.showOnFocus)return!0;e.preventDefault()}if(t.useSelect)i.data("timepicker-list").focus();else{_hideKeyboard(i)&&i.blur();var r=i.data("timepicker-list");if(!i.prop("readonly")&&(r&&0!==r.length&&"function"!=typeof t.durationTime||(_render(i),r=i.data("timepicker-list")),!_isVisible(r))){y.hide(),r.show();var a,n={};t.orientation.match(/r/)?n.left=i.offset().left+i.outerWidth()-r.outerWidth()+parseInt(r.css("marginLeft").replace("px",""),10):n.left=i.offset().left+parseInt(r.css("marginLeft").replace("px",""),10),a=t.orientation.match(/t/)?"t":t.orientation.match(/b/)?"b":i.offset().top+i.outerHeight(!0)+r.outerHeight()>_(window).height()+_(window).scrollTop()?"t":"b",n.top="t"==a?(r.addClass("ui-timepicker-positioned-top"),i.offset().top-r.outerHeight()+parseInt(r.css("marginTop").replace("px",""),10)):(r.removeClass("ui-timepicker-positioned-top"),i.offset().top+i.outerHeight()+parseInt(r.css("marginTop").replace("px",""),10)),r.offset(n);var s=r.find(".ui-timepicker-selected");if(s.length||(_getTimeValue(i)?s=_findRow(i,r,_time2int(_getTimeValue(i))):t.scrollDefault&&(s=_findRow(i,r,t.scrollDefault))),s&&s.length){var o=r.scrollTop()+s.position().top-s.outerHeight();r.scrollTop(o)}else r.scrollTop(0);return _(document).on("touchstart.ui-timepicker mousedown.ui-timepicker",_closeHandler),t.closeOnWindowScroll&&_(document).on("scroll.ui-timepicker",_closeHandler),i.trigger("showTimepicker"),this}}},hide:function(e){var i=_(this),t=i.data("timepicker-settings");return t&&t.useSelect&&i.blur(),_(".ui-timepicker-wrapper").each(function(){var e=_(this);if(_isVisible(e)){var i=e.data("timepicker-input"),t=i.data("timepicker-settings");t&&t.selectOnBlur&&_selectValue(i),e.hide(),i.trigger("hideTimepicker")}}),this},option:function(r,a){return this.each(function(){var e=_(this),i=e.data("timepicker-settings"),t=e.data("timepicker-list");if("object"==typeof r)i=_.extend(i,r);else if("string"==typeof r&&void 0!==a)i[r]=a;else if("string"==typeof r)return i[r];i=_parseSettings(i),e.data("timepicker-settings",i),t&&(t.remove(),e.data("timepicker-list",!1)),i.useSelect&&_render(e)})},getSecondsFromMidnight:function(){return _time2int(_getTimeValue(this))},getTime:function(e){var i=_getTimeValue(this);if(!i)return null;e||(e=new Date);var t=_time2int(i),r=new Date(e);return r.setHours(t/3600),r.setMinutes(t%3600/60),r.setSeconds(t%60),r.setMilliseconds(0),r},setTime:function(e){var i=this,t=i.data("timepicker-settings");if(t.forceRoundTime)var r=_roundAndFormatTime(_time2int(e),t);else r=_int2time(_time2int(e),t);return _setTimeValue(i,r),i.data("timepicker-list")&&_setSelected(i,i.data("timepicker-list")),this},remove:function(){var e=this;if(e.hasClass("ui-timepicker-input")){var i=e.data("timepicker-settings");return e.removeAttr("autocomplete","off"),e.removeClass("ui-timepicker-input"),e.removeData("timepicker-settings"),e.off(".timepicker"),e.data("timepicker-list")&&e.data("timepicker-list").remove(),i.useSelect&&e.show(),e.removeData("timepicker-list"),this}}};function _isVisible(e){var i=e[0];return 0<i.offsetWidth&&0<i.offsetHeight}function _parseSettings(e){if(e.minTime&&(e.minTime=_time2int(e.minTime)),e.maxTime&&(e.maxTime=_time2int(e.maxTime)),e.durationTime&&"function"!=typeof e.durationTime&&(e.durationTime=_time2int(e.durationTime)),"now"==e.scrollDefault?e.scrollDefault=_time2int(new Date):e.scrollDefault?e.scrollDefault=_time2int(e.scrollDefault):e.minTime&&(e.scrollDefault=e.minTime),e.scrollDefault&&(e.scrollDefault=e.roundingFunction(e.scrollDefault,e)),"string"===_.type(e.timeFormat)&&e.timeFormat.match(/[gh]/)&&(e._twelveHourTime=!0),0<e.disableTimeRanges.length){for(var i in e.disableTimeRanges)e.disableTimeRanges[i]=[_time2int(e.disableTimeRanges[i][0]),_time2int(e.disableTimeRanges[i][1])];e.disableTimeRanges=e.disableTimeRanges.sort(function(e,i){return e[0]-i[0]});for(i=e.disableTimeRanges.length-1;0<i;i--)e.disableTimeRanges[i][0]<=e.disableTimeRanges[i-1][1]&&(e.disableTimeRanges[i-1]=[Math.min(e.disableTimeRanges[i][0],e.disableTimeRanges[i-1][0]),Math.max(e.disableTimeRanges[i][1],e.disableTimeRanges[i-1][1])],e.disableTimeRanges.splice(i,1))}return e}function _render(i){var e=i.data("timepicker-settings"),t=i.data("timepicker-list");if(t&&t.length&&(t.remove(),i.data("timepicker-list",!1)),e.useSelect)var r=t=_("<select />",{class:"ui-timepicker-select"});else t=_("<ul />",{class:"ui-timepicker-list"}),(r=_("<div />",{class:"ui-timepicker-wrapper",tabindex:-1})).css({display:"none",position:"absolute"}).append(t);if(e.noneOption)if(!0===e.noneOption&&(e.noneOption=e.useSelect?"Time...":"None"),_.isArray(e.noneOption)){for(var a in e.noneOption)if(parseInt(a,10)==a){var n=_generateNoneElement(e.noneOption[a],e.useSelect);t.append(n)}}else{n=_generateNoneElement(e.noneOption,e.useSelect);t.append(n)}if(e.className&&r.addClass(e.className),(null!==e.minTime||null!==e.durationTime)&&e.showDuration){"function"==typeof e.step||e.step;r.addClass("ui-timepicker-with-duration"),r.addClass("ui-timepicker-step-"+e.step)}var s=e.minTime;"function"==typeof e.durationTime?s=_time2int(e.durationTime()):null!==e.durationTime&&(s=e.durationTime);var o=null!==e.minTime?e.minTime:0,l=null!==e.maxTime?e.maxTime:o+b-1;l<o&&(l+=b),l===b-1&&"string"===_.type(e.timeFormat)&&e.show2400&&(l=b);var c=e.disableTimeRanges,u=0,m=c.length,p=e.step;"function"!=typeof p&&(p=function(){return e.step});a=o;for(var d=0;a<=l;a+=60*p(++d)){var f,h=a,g=_int2time(h,e);if(e.useSelect)(f=_("<option />",{value:g})).text(g);else(f=_("<li />")).data("time",h<=86400?h:h%86400),f.text(g);if((null!==e.minTime||null!==e.durationTime)&&e.showDuration){var k=_int2duration(a-s,e.step);if(e.useSelect)f.text(f.text()+" ("+k+")");else{var v=_("<span />",{class:"ui-timepicker-duration"});v.text(" ("+k+")"),f.append(v)}}u<m&&(h>=c[u][1]&&(u+=1),c[u]&&h>=c[u][0]&&h<c[u][1]&&(e.useSelect?f.prop("disabled",!0):f.addClass("ui-timepicker-disabled"))),t.append(f)}if(r.data("timepicker-input",i),i.data("timepicker-list",r),e.useSelect)i.val()&&t.val(_roundAndFormatTime(_time2int(i.val()),e)),t.on("focus",function(){_(this).data("timepicker-input").trigger("showTimepicker")}),t.on("blur",function(){_(this).data("timepicker-input").trigger("hideTimepicker")}),t.on("change",function(){_setTimeValue(i,_(this).val(),"select")}),_setTimeValue(i,t.val(),"initial"),i.hide().after(t);else{var T=e.appendTo;"string"==typeof T?T=_(T):"function"==typeof T&&(T=T(i)),T.append(r),_setSelected(i,t),t.on("mousedown","li",function(e){i.off("focus.timepicker"),i.on("focus.timepicker-ie-hack",function(){i.off("focus.timepicker-ie-hack"),i.on("focus.timepicker",y.show)}),_hideKeyboard(i)||i[0].focus(),t.find("li").removeClass("ui-timepicker-selected"),_(this).addClass("ui-timepicker-selected"),_selectValue(i)&&(i.trigger("hideTimepicker"),t.on("mouseup.timepicker","li",function(e){t.off("mouseup.timepicker"),r.hide()}))})}}function _generateNoneElement(e,i){var t,r,a;return"object"==typeof e?(t=e.label,r=e.className,a=e.value):"string"==typeof e?t=e:_.error("Invalid noneOption value"),i?_("<option />",{value:a,class:r,text:t}):_("<li />",{class:r,text:t}).data("time",a)}function _roundAndFormatTime(e,i){if(null!==(e=i.roundingFunction(e,i)))return _int2time(e,i)}function _closeHandler(e){var i=_(e.target);0===i.closest(".ui-timepicker-input").length&&0===i.closest(".ui-timepicker-wrapper").length&&(y.hide(),_(document).unbind(".ui-timepicker"))}function _hideKeyboard(e){var i=e.data("timepicker-settings");return(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&i.disableTouchKeyboard}function _findRow(e,i,r){if(!r&&0!==r)return!1;var t=e.data("timepicker-settings"),a=!1;r=t.roundingFunction(r,t);return i.find("li").each(function(e,i){var t=_(i);if("number"==typeof t.data("time"))return t.data("time")==r?(a=t,!1):void 0}),a}function _setSelected(e,i){i.find("li").removeClass("ui-timepicker-selected");var t=_time2int(_getTimeValue(e),e.data("timepicker-settings"));if(null!==t){var r=_findRow(e,i,t);if(r){var a=r.offset().top-i.offset().top;(a+r.outerHeight()>i.outerHeight()||a<0)&&i.scrollTop(i.scrollTop()+r.position().top-r.outerHeight()),r.addClass("ui-timepicker-selected")}}}function _formatValue(e,i){if(""!==this.value&&"timepicker"!=i){var t=_(this);if(!t.is(":focus")||e&&"change"==e.type){var r=t.data("timepicker-settings"),a=_time2int(this.value,r);if(null!==a){var n=!1;null!==r.minTime&&a<r.minTime?n=!0:null!==r.maxTime&&a>r.maxTime&&(n=!0),_.each(r.disableTimeRanges,function(){if(a>=this[0]&&a<this[1])return!(n=!0)}),r.forceRoundTime&&(a=r.roundingFunction(a,r));var s=_int2time(a,r);n?_setTimeValue(t,s,"error")&&t.trigger("timeRangeError"):_setTimeValue(t,s)}else t.trigger("timeFormatError")}}}function _getTimeValue(e){return e.is("input")?e.val():e.data("ui-timepicker-value")}function _setTimeValue(e,i,t){if(e.is("input")){e.val(i);var r=e.data("timepicker-settings");r.useSelect&&"select"!=t&&"initial"!=t&&e.data("timepicker-list").val(_roundAndFormatTime(i,r))}return e.data("ui-timepicker-value")!=i?(e.data("ui-timepicker-value",i),"select"==t?e.trigger("selectTime").trigger("changeTime").trigger("change","timepicker"):"error"!=t&&e.trigger("changeTime"),!0):(e.trigger("selectTime"),!1)}function _keydownhandler(e){var i=_(this),t=i.data("timepicker-list");if(!t||!_isVisible(t)){if(40!=e.keyCode)return!0;y.show.call(i.get(0)),t=i.data("timepicker-list"),_hideKeyboard(i)||i.focus()}switch(e.keyCode){case 13:return _selectValue(i)&&y.hide.apply(this),e.preventDefault(),!1;case 38:var r=t.find(".ui-timepicker-selected");return r.length?r.is(":first-child")||(r.removeClass("ui-timepicker-selected"),r.prev().addClass("ui-timepicker-selected"),r.prev().position().top<r.outerHeight()&&t.scrollTop(t.scrollTop()-r.outerHeight())):(t.find("li").each(function(e,i){if(0<_(i).position().top)return r=_(i),!1}),r.addClass("ui-timepicker-selected")),!1;case 40:return 0===(r=t.find(".ui-timepicker-selected")).length?(t.find("li").each(function(e,i){if(0<_(i).position().top)return r=_(i),!1}),r.addClass("ui-timepicker-selected")):r.is(":last-child")||(r.removeClass("ui-timepicker-selected"),r.next().addClass("ui-timepicker-selected"),r.next().position().top+2*r.outerHeight()>t.outerHeight()&&t.scrollTop(t.scrollTop()+r.outerHeight())),!1;case 27:t.find("li").removeClass("ui-timepicker-selected"),y.hide();break;case 9:y.hide();break;default:return!0}}function _keyuphandler(e){var i=_(this),t=i.data("timepicker-list");if(!t||!_isVisible(t))return!0;if(!i.data("timepicker-settings").typeaheadHighlight)return t.find("li").removeClass("ui-timepicker-selected"),!0;switch(e.keyCode){case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 77:case 80:case 186:case 8:case 46:_setSelected(i,t);break;default:return}}function _selectValue(e){var i=e.data("timepicker-settings"),t=null,r=e.data("timepicker-list").find(".ui-timepicker-selected");if(r.hasClass("ui-timepicker-disabled"))return!1;(r.length&&(t=r.data("time")),null!==t)&&("string"==typeof t?(e.val(t),e.trigger("selectTime").trigger("changeTime").trigger("change","timepicker")):_setTimeValue(e,_int2time(t,i),"select"));return!0}function _int2duration(e,i){e=Math.abs(e);var t,r,a=Math.round(e/60),n=[];return a<60?n=[a,m.mins]:(t=Math.floor(a/60),r=a%60,30==i&&30==r&&(t+=m.decimal+5),n.push(t),n.push(1==t?m.hr:m.hrs),30!=i&&r&&(n.push(r),n.push(m.mins))),n.join(" ")}function _int2time(e,i){if(null!==e){var t=new Date(l.valueOf()+1e3*e);if(!isNaN(t.getTime())){if("function"===_.type(i.timeFormat))return i.timeFormat(t);for(var r,a,n="",s=0;s<i.timeFormat.length;s++)switch(a=i.timeFormat.charAt(s)){case"a":n+=11<t.getHours()?m.pm:m.am;break;case"A":n+=11<t.getHours()?m.PM:m.AM;break;case"g":n+=0===(r=t.getHours()%12)?"12":r;break;case"G":r=t.getHours(),e===b&&(r=24),n+=r;break;case"h":0!==(r=t.getHours()%12)&&r<10&&(r="0"+r),n+=0===r?"12":r;break;case"H":r=t.getHours(),e===b&&(r=24),n+=9<r?r:"0"+r;break;case"i":var o=t.getMinutes();n+=9<o?o:"0"+o;break;case"s":n+=9<(e=t.getSeconds())?e:"0"+e;break;case"\\":s++,n+=format.charAt(s);break;default:n+=a}return n}}}function _time2int(e,i){if(""===e)return null;if(!e||e+0==e)return e;if("object"==typeof e)return 3600*e.getHours()+60*e.getMinutes()+e.getSeconds();"a"!=(e=e.toLowerCase().replace(".","")).slice(-1)&&"p"!=e.slice(-1)||(e+="m");var t="("+m.am.replace(".","")+"|"+m.pm.replace(".","")+"|"+m.AM.replace(".","")+"|"+m.PM.replace(".","")+")?",r=new RegExp("^"+t+"\\s*([0-2]?[0-9])\\W?([0-5][0-9])?\\W?([0-5][0-9])?\\s*"+t+"$"),a=e.match(r);if(!a)return null;var n=parseInt(1*a[2],10),s=a[1]||a[5],o=n;if(n<=12&&s){var l=s==m.pm||s==m.PM;o=12==n?l?12:0:n+(l?12:0)}var c=3600*o+60*(1*a[3]||0)+(1*a[4]||0);if(!s&&i&&i._twelveHourTime&&i.scrollDefault){var u=c-i.scrollDefault;u<0&&b/-2<=u&&(c=(c+b/2)%b)}return c}_.fn.timepicker=function(e){return this.length?y[e]?this.hasClass("ui-timepicker-input")?y[e].apply(this,Array.prototype.slice.call(arguments,1)):this:"object"!=typeof e&&e?void _.error("Method "+e+" does not exist on jQuery.timepicker"):y.init.apply(this,arguments):this},_.fn.timepicker.defaults={className:null,minTime:null,maxTime:null,durationTime:null,step:30,showDuration:!1,showOnFocus:!0,timeFormat:"g:ia",scrollDefault:null,selectOnBlur:!1,disableTouchKeyboard:!1,forceRoundTime:!1,roundingFunction:function(e,i){if(null===e)return null;var t=e%(60*i.step);return t>=30*i.step?e+=60*i.step-t:e-=t,e},appendTo:"body",orientation:"l",disableTimeRanges:[],closeOnWindowScroll:!1,typeaheadHighlight:!0,noneOption:!1,show2400:!1}});