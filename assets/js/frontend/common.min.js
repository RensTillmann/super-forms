jQuery(document).ready(function ($) {
    
    var $doc = $(document);
    
    $doc.on('click', '.super-form-button > a', function () {
        SUPER.FieldCalculator();
        SUPER.validate_form($(this).parents('.super-form'));
        return false;
    });

    function update_field_filter_visibility($this){
        var $field_name = $this.find('.element-field').attr('name');
        var $field_value = $this.find('.element-field').val();
        $('.field[data-parent="'+$field_name+'"], .super-field[data-parent="'+$field_name+'"]').each(function(){
            var $this = $(this);
            var $filtervalue = $this.data('filtervalue');
            var str1 = $filtervalue;
            var str2 = $field_value;
            if(str2==''){
                $this.css('display','none');
            }else{
                if(str1.indexOf(str2) != -1){
                    $this.css('display','block').removeClass('hidden');
                }else{
                    $this.css('display','none').addClass('hidden');
                }
            }
        });
        $('.field-container[data-parent="'+$field_name+'"]').each(function(){
            var $this = $(this);
            var $filtervalue = $this.data('filtervalue');
            var str1 = $filtervalue;
            var str2 = $field_value;
            if(str2==''){
                $this.css('display','none');
            }else{
                if(str1.indexOf(str2) != -1){
                    $this.css('display','block').removeClass('hidden');
                }else{
                    $this.css('display','none').addClass('hidden');
                }
            }
        });
    }
    $('.field-container.filter, .field.filter, .super-field.filter').each(function(){
        update_field_filter_visibility($(this));
    });
    $doc.on('change','.field-container.filter, .field.filter, .super-field.filter',function(){
        update_field_filter_visibility($(this));
    });
        
    $doc.on('keyup', '.super-icon-search input', function(){
        var $value = $(this).val();
        var $icons = $(this).parents('.super-icon-field').children('.super-icon-list').children('i');
        if($value==''){
            $icons.css('display','inline-block');   
        }else{
            $icons.each(function(){
                if($(this).is('[class*="'+$value+'"]')) {
                    $(this).css('display','inline-block');
                }else{
                    $(this).css('display','none');
                }
            });
        }
    });

    $doc.on('click','.super-icon-list i',function(){
        if($(this).hasClass('active')){
            $(this).parent().find('i').removeClass('active');
            $(this).parents('.super-icon-field').find('input').val('');
        }else{
            $(this).parent().find('i').removeClass('active');
            $(this).parents('.super-icon-field').find('input').val($(this).attr('class').replace('fa fa-',''));
            $(this).addClass('active');
        }
    });

    SUPER.init_slider_field();
    SUPER.init_tooltips(); 
    SUPER.init_color_pickers();
    SUPER.init_super_form_frontend();
    
});