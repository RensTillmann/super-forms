(function($) { // Hide scope, no $ conflict
	
    jQuery(document).ready(function ($) {
    
	    var $doc = $(document);
	    
	    $doc.on('click', '.super-form-button > a', function (e) {
	        var $this = $(this);
	        var $form = $this.parents('.super-form');
	        
	        // @since 2.0.0 - clear the form action
	        var $action = $this.children('.super-button-name').data('action');
	        if($action=='clear'){
	        	
	        	/*
	        	text
	        	textarea
	        	quantity
	        	slider
	        	date
	        	time
				*/
	        	$form.find('.super-shortcode-field').each(function(){
	        		var $element = $(this);
	        		
	        		// check if this value has a default value
	        		var $value = '';
	        		if(typeof $element.data('default-value') !== 'undefined'){
	        			var $field = $element.parents('.super-field:eq(0)');
	        			$value = $element.data('default-value');
	        			$element.val($value);
	        			
	        			// Slider field
	        			if($field.hasClass('super-slider')){
						    $element.simpleSlider("setValue", $value);
	        				return true;
	        			}
	        		}
	        		$element.val($value);
	        	});
	        	return false;
	        }

	        var $url = $this.attr('href');

	        // @since 1.9
	        var $proceed = SUPER.before_submit_button_click_hook(e, $this);

	        if($proceed==true){
		        if($url!=''){
					var $regular_expression = /\{(.*?)\}/g;
				    var $array = [];
					var $i = 0;
				    while (($match = $regular_expression.exec($url)) != null) {
				    	$array[$i] = $match[1];
				    	$i++;
				    }
					for (var $i = 0; $i < $array.length; $i++) {
				        var $name = $array[$i];
				        var $element = $form.find('.super-shortcode-field[name="'+$name+'"]');
				        if($element.length){
							$value = $element.val();
							$url = $url.replace('{'+$name+'}', $value);
							
				        }
				    }
				    $url = $url.replace('{', '').replace('}', '')
				    $this.attr('href', $url);
				    if( $url=='#' ) {
				    	return false;
				    }
		        }else{
		            if(!$this.parent('.super-form-button').hasClass('super-loading')){
		            	SUPER.validate_form( $form, $this );
		        	}
		        	return false;
		        }
	        }

	    });

	    SUPER.init_tooltips(); 
	    SUPER.init_super_form_frontend();
		
		$( document ).ajaxComplete(function() {
			SUPER.init_super_form_frontend();
		});
	   
	});

})(jQuery);
