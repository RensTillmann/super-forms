(function($) { // Hide scope, no $ conflict
	
    jQuery(document).ready(function ($) {
    
	    var $doc = $(document);
	    
	    $doc.on('click', '.super-form-button > a', function (e) {
	        var $this = $(this);
	        var $form = $this.parents('.super-form');
	        
	        // @since 2.0.0 - clear the form action
	        var $action = $this.children('.super-button-name').data('action');
	        if($action=='clear'){
	        	
	        	$form.find('.super-shortcode-field').each(function(){
	        		var $element = $(this);
	        		
	        		// check if this value has a default value
	        		var $value = '';
					var $field = $element.parents('.super-field:eq(0)');
	        		if(typeof $element.data('default-value') !== 'undefined'){
	        			$value = $element.data('default-value');
	        			$element.val($value);
	        			// Slider field
	        			if($field.hasClass('super-slider')){
						    $element.simpleSlider("setValue", $value);
	        				return true;
	        			}
	        			// Dropdown field
	        			if($field.hasClass('super-dropdown')){
						    $field.find('.super-dropdown-ui > li').removeClass('selected');
						    $field.find('.super-dropdown-ui > li.super-default-selected').addClass('selected');
	        				SUPER.init_set_dropdown_placeholder();
	        				return true;
	        			}
	        			// Checkbox and Radio buttons
	        			if( $field.hasClass('super-checkbox') || $field.hasClass('super-radio') ){
							$field.find('.super-field-wrapper > label').removeClass('super-selected');
						    $field.find('.super-field-wrapper > label input').prop('checked', false);
						    $field.find('.super-field-wrapper > label.super-default-selected').addClass('super-selected');	
						    $field.find('.super-field-wrapper > label.super-default-selected input').prop('checked', true);
	        			}
			        	// Rating field
	        			if($field.hasClass('super-rating')){
			                var $rating = $field.find('.super-rating-star:eq('+($value-1)+')');
			                if($rating.length){
			                    $field.find('.super-rating-star').removeClass('selected');
			                    $rating.addClass('selected');
			                    $rating.prevAll('.super-rating-star').addClass('selected');
			                }
				        }
	        		}else{
						// Countries field
	        			if($field.hasClass('super-countries')){
						    var $placeholder = $element.attr('placeholder');
						    if(typeof $placeholder === 'undefined' ) {
						    	var $dropdown = $field.find('.super-dropdown-ui');
						    	var $option = $field.find('.super-dropdown-ui > li:nth-child(2)');
						    	$dropdown.children('li').removeClass('selected');
						    	$dropdown.children('.super-default-selected').addClass('selected');
						    	$dropdown.find('.super-placeholder').attr('data-value',$option.data('value')).html($option.html());
						    	$element.val($option.data('value'));
						    }else{
						    	var $dropdown = $field.find('.super-dropdown-ui');
						    	$dropdown.children('li').removeClass('selected');
						    	$dropdown.find('.super-placeholder').attr('data-value','').html($placeholder);
						    	$element.val('');
						    }
	        				return true;
	        			}
	        			// File upload field
	        			if($field.hasClass('super-file')){
							console.log('test1');	
	        			}
	        		}
	        		$element.val($value);
	        	});

	        	// Signature field
	        	$form.find('.super-signature-clear').trigger('click');

	        	// After button click hook
	        	SUPER.after_clear_button_click_hook($this, $form);

	        	return false;
	        }

	        var $url = $this.attr('href');

	        // @since 1.9
	        var $proceed = SUPER.before_submit_button_click_hook(e, $this);

	        if($proceed==true){
		        if($url!=''){
					var $regular_expression = /\{(.*?)\}/g;
				    var $array = [];
					var $i = 0;
				    while (($match = $regular_expression.exec($url)) != null) {
				    	$array[$i] = $match[1];
				    	$i++;
				    }
					for (var $i = 0; $i < $array.length; $i++) {
				        var $name = $array[$i];
				        var $element = $form.find('.super-shortcode-field[name="'+$name+'"]');
				        if($element.length){
							$value = $element.val();
							$url = $url.replace('{'+$name+'}', $value);
							
				        }
				    }
				    $url = $url.replace('{', '').replace('}', '')
				    $this.attr('href', $url);
				    if( $url=='#' ) {
				    	return false;
				    }
		        }else{
		            if(!$this.parent('.super-form-button').hasClass('super-loading')){
		            	SUPER.validate_form( $form, $this );
		        	}
		        	return false;
		        }
	        }

	    });

	    SUPER.init_tooltips(); 
	    SUPER.init_super_form_frontend();
		
		$( document ).ajaxComplete(function() {
			SUPER.init_super_form_frontend();
		});
	   
	});

})(jQuery);
